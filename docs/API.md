# 포트원 REST API 연동 설정

MCP 서버에서 포트원 REST API를 사용하면, AI가 포트원의 데이터를 활용해 아래와 같은 작업을 수행할 수 있습니다.

- 결제 내역 단건/다건 조회
- 본인인증 내역 단건/다건 조회
- 빌링키(정기결제) 내역 단건/다건 조회

이 문서에서는 API 연동을 활성화하는 방법과 보안 관련 참고 사항을 안내합니다.

## API 연동 활성화

MCP 설정 파일의 `env` 블록에 포트원 관리자 콘솔에서 발급받은 `API_SECRET`을 추가합니다.

```json
"mcpServers": {
    "portone-mcp-server": {
        "command": "uvx",
        "args": [
            "portone-mcp-server@latest"
        ],
        // 아래 env 블록을 추가하여 API 시크릿을 설정합니다.
        "env": {
            "API_SECRET": "<YOUR_PORTONE_API_SECRET>"
        }
    }
}
```

> [!CAUTION]
> API 시크릿은 단순 조회 기능을 넘어, 포트원 REST API의 모든 권한을 가집니다.
> 여기에는 결제 취소, 빌링키 삭제 등 데이터를 영구적으로 변경하거나 삭제하는 파괴적인 작업이 포함됩니다.
> API 시크릿은 내부의 인가된 인원만이 사용할 수 있도록 통제해야 합니다.

## 보안 관련 참고 사항

- MCP 서버에서는 공개된 REST API만을 사용하고, 사용자의 API 시크릿을 사용합니다.

  API 시크릿을 사용한 인증 과정은 전적으로 MCP 서버 내부에서 일어나므로, AI 모델의 문제로 인해 인가되지 않은 정보가 유출되지는 않습니다.

- 제3자 AI 서비스를 사용할 경우에 API 응답이 AI 서비스 측으로 전달되어 저장되거나, 서비스의 정책에 따라 학습에 사용될 수 있습니다.

  현재 MCP 서버에서는 잠재적인 문제 상황을 예방하기 위해 API 응답에서 개인정보를 제거하고 있지만, 개인정보 외의 정보는 AI 서비스에 그대로 노출됩니다.
